## Project TODO / Roadmap

간결하고 실행 가능한 작업 목록입니다. 상세 설계/정책은 `docs/` 내 개별 문서를 참고하세요.

### Test Strategy Implementation (우선순위 High)
- [x] 테스트 실행 스크립트 표준화: Makefile/scripts로 단위-통합-E2E 실행 체계화
- [x] 커버리지 기준 설정: pytest.ini에 70%+ 기준 및 파이프라인 게이트 추가
- [x] Docker 기반 테스트 환경: 격리된 테스트 실행 및 의존성 관리
- [x] 테스트 문서 통합: TESTING_GUIDE.md로 모든 테스트 관련 문서 통합
- [x] 중복 스크립트 제거: verify-before-commit.sh 기능을 test-runner.sh CI 명령에 통합
- [x] Makefile 최적화: 간소화된 명령어로 test-runner.sh 스크립트 활용
- [ ] DB 연결 문제 해결: MySQL 테이블 스키마 초기화 및 인증 이슈 해결
- [ ] 커버리지 향상: 현재 27% → 목표 70% (API 엔드포인트, CQRS, 도메인 레이어)
- [ ] CI 파이프라인 개선: 단계별 실행(lint→unit→integration→build→e2e)
- [ ] Testcontainers 도입: MySQL 격리 환경으로 통합 테스트 안정화
- [ ] 계약 테스트 구축: OpenAPI 스키마 vs 실제 응답 검증 체계
- [ ] 결정적 시드 데이터: Alembic + fixtures로 재현 가능한 테스트 데이터
- [ ] 외부 API 스텁화: yfinance 등 계약 테스트와 라이브 스모크 분리

### High (다음 스프린트) 
- [ ] 채팅 WebSocket 연결 문제 해결: 로그인 후 채팅 기능이 작동하지 않는 문제 진단 및 해결
- [x] 포트폴리오 백테스트 뉴스 조회 문제: 다중 종목 선택 시 주가 급등/급락 뉴스가 나오지 않는 문제 해결
- [ ] 뉴스 검색 기간 제한 해제: "해당 기간의 뉴스를 찾을 수 없습니다" 시 전체 기간 뉴스 조회하도록 개선
- [ ] 중복 티커 처리 문제: 동일 종목 여러개 입력 시 'META_0' 등 잘못된 티커로 처리되는 문제 해결
- [ ] 포트폴리오 백테스트 지표 문제: 다중 종목 시 최대 손실, 샤프, 프로핏 팩터 등 지표가 제대로 출력되지 않는 문제 해결
- [ ] 금융용어 도움말 기능: 프론트엔드에 주식용어, 금융용어에 대한 도움말/툴팁 기능 추가
- [ ] 백테스트 결과 지표 확장: 월/연도별 성과, 베타, 연속 손실/이익 기간, CAGR 보정
- [ ] Open trades 처리: `finalize_trades=True` 적용 검토 또는 자체 마감 로직 도입(현재 경고 다수)
- [ ] MySQL Repository 구현: `MySQLBacktestRepository` CRUD 구현 및 설정 스위치 지원
- [ ] API 검증/에러코드 일관화: 422 기준 정비, ValidationError 메시지 표준화
- [ ] 프론트 테스트 경고 제거: `React.act` 사용으로 마이그레이션, `act(...)` 누락 케이스 래핑
- [ ] 비동기 잡 실행: 잡ID 기반 백테스트 비동기화, 진행률(WebSocket/SSE) 제공, 결과 캐시
- [ ] 벤치마크 지원: KOSPI/S&P/국채 등 선택 및 상대 성과/초과수익 계산
- [ ] 롤링 분석/리포트: 롤링 샤프/변동성/상관 + 월별/연도별 성과 테이블 UI/API
- [ ] 드로우다운 상세 리포트: 최대/평균 깊이·기간, 회복 시간(Recovery) 타임라인
- [ ] 데이터 무결성 강화(1차): 룩어헤드 방지, 상장폐지/심볼변경 매핑, 생존자 편향 완화 가이드

### Medium (제품 개선)
- [ ] 사용자/포트폴리오 저장: 사용자 관리 + 포트폴리오 저장/조회 API/UX
- [ ] 전략 파라미터 프리셋/검증 UI: 전략별 권장값/범위 시각화
- [ ] 성능/리소스 가드: 대용량 구간 타임아웃/메모리 보호 옵션 제공
- [ ] 의존성 보안 점검: 프론트 npm audit 취약점 우선순위 기반 처리
- [ ] 고급 최적화: HRP/HERC, CVaR(ES) 최소화, Black-Litterman, 로버스트 MV 옵션
- [ ] 제약조건 모델링: 최소/최대 비중, 턴오버/섹터/익스포저 제약, 정수(라운딩) 제약
- [ ] 변동성 타겟팅: 위험예산(ERC), 볼라 스케일링, Kelly fraction 옵션
- [ ] DCA/리밸런싱 시뮬: 주기/금액 스케줄, 현금버퍼 사용 규칙
- [ ] 기여도 분석: 자산/섹터별 성과 기여, 리스크 기여(ERC)
- [ ] 상관/군집 시각화: 히트맵, 덴드로그램(군집)

### Low (확장/실험)
- [ ] 뉴스/변동성 고도화: 키워드 필터, 간단 감성/상관 분석
- [ ] 자동완성/심볼 검색 개선: 캐시 + 최근 사용 심볼 제공
- [ ] 백테스트 시나리오 템플릿: 샘플 시나리오 저장/불러오기
- [ ] 배당/액면분할: 배당 재투자(DRIP), 원천징수율, ETF 분배금 반영
- [ ] 몬테카를로/부트스트랩: 블록 부트스트랩 경로 생성, 성과 신뢰구간 제공
- [ ] 스트레스 테스트: 2008/2020 이벤트 리플레이, 금리 급등/급락 시나리오
- [ ] 벤치마크 회귀: CAPM/Fama-French 요인 노출 추정
- [ ] 리포트 내보내기: PDF, 이미지 요약 리포트 생성
- [ ] 프로젝트/프리셋: 포트폴리오·전략 프리셋 저장/공유, 링크 재현

### Quality / Tech Debt
- [ ] Pydantic V2 마이그레이션 마무리: ConfigDict, `json_schema_extra` 사용으로 경고 제거
- [ ] 백엔드 변환/폴백 안전성 테스트: 폴백 결과/결과 변환(safe_float/int) 단위 테스트 추가
- [ ] Docker 베이스 이미지 고정: 백엔드 `python:3.11-slim@<digest>`로 핀(프론트는 고정됨)
- [ ] 속성 기반 테스트: 백테스트 불변식(턴오버 한도, 현금 보존, 음수 보유량 금지) 자동 검증
- [ ] 데이터 공급자 추상화: yfinance 외 Tiingo/Polygon/EODHD 플러그형 인터페이스
- [ ] 멀티커런시/헤지: 기본통화 설정, 환헤지/언헷지 옵션, FX 결측 보간 규칙

### CI/CD & Infra
- [ ] Jenkins 결과 게시 개선: GitHub Checks/Artifacts 링크화 검토
- [ ] 캐시 최적화: 프론트 테스트 컨테이너 npm 캐시 재사용률 점검 및 개선
- [ ] 배포 구성 단순화: 필요 시 `:latest` 푸시 완전 제거(캐시 목적 외 사용 지양)
- [ ] 캐싱/레이트리밋: 쿼리 키 규격화, 지수적 백오프/재시도, 실패 캐시(negative cache)
- [ ] 관측성: 구조화 로깅/트레이스ID, Sentry 연동, 메트릭 대시보드(Grafana/Prometheus)

### Docs
- [ ] 문서 교차 링크 정리: GUIDE ↔ TEST_ARCHITECTURE ↔ RUNBOOK 상호 연결 강화
- [ ] Compose 명령/경로 검수: `compose.yml` / `compose/compose.dev.yml` 사용 일원화 유지
- [ ] 신규 기능 가이드: 벤치마크/최적화/리포트/비동기 잡 사용자 가이드 추가
- [ ] 데이터 무결성/편향 방지 가이드 추가 및 예시 코드

---

## Done (최근)
- [x] 현금 자산 처리: `asset_type='cash'` 지원(0% 수익률, 무변동성)
- [x] 프론트 대규모 리팩터링: 폼/결과/뉴스 컴포넌트 분리, 상태 로직 훅화
- [x] 오프라인 모킹 테스트 체계: 외부 의존성 제거, CI 안정화
- [x] Jenkins 파이프라인 안정화: GHCR 로그인/푸시 재시도, 빌드 병렬화, POSIX 호환 수정
- [x] Compose 재구성/문서 일원화: `compose.yml`, `compose/compose.dev.yml` 반영

- [ ] 자산 비율 내가 정할 수 있도록.

성능 최적화: EnhancedChartsSection에 대해 다음 최적화 적용

차트 데이터 청킹 (pagination)
가상 스크롤링 (virtualization)
지연 로딩 (lazy loading)
메모이제이션 개선
점진적 기능 복원: 최적화 후 환율, 벤치마크 차트 단계적 활성화