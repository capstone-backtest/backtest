# 서버 배포 가이드

## 1. 개요

이 문서는 Backtesting 플랫폼을 프로덕션 환경에 배포하는 방법을 설명합니다. 프로젝트는 Docker Compose를 사용하여 백엔드, 프론트엔드, 데이터베이스, 리버스 프록시 등 모든 서비스를 한 번에 배포하도록 구성되어 있습니다.

## 2. 사전 요구사항

*   Docker
*   Docker Compose

## 3. 환경 설정

배포 전, 프로덕션 환경에 맞는 설정을 구성해야 합니다.

### 3.1. 백엔드 환경 변수

`backend/env.example` 파일을 `backend/.env`로 복사한 후, 프로덕션 환경에 맞게 아래 값들을 수정합니다.

*   **`SECRET_KEY`**: 보안을 위해 강력하고 유니크한 값으로 변경해야 합니다.
*   **`DB_HOST`**, **`DB_PORT`**, **`DB_USER`**, **`DB_PASSWORD`**, **`DB_NAME`**: 프로덕션 데이터베이스 정보를 입력합니다. (Docker Compose 내부의 `mysql` 서비스를 그대로 사용할 경우, 기본값을 유지할 수 있습니다.)
*   **`DEBUG`**: `false`로 설정하여 디버그 모드를 비활성화합니다.

### 3.2. 데이터베이스 초기화

`database/initdb.d` 디렉터리에 `.sql` 파일을 추가하여 데이터베이스가 처음 생성될 때 테이블 생성이나 초기 데이터 삽입을 자동으로 수행할 수 있습니다.

## 4. 배포

프로젝트 루트 디렉터리에서 아래 명령어를 실행하여 모든 서비스를 빌드하고 백그라운드에서 실행합니다.

```bash
docker-compose up --build -d
```

배포가 완료되면 `http://localhost:8080` (또는 서버의 IP 주소)으로 접속하여 애플리케이션을 확인할 수 있습니다.

## 5. 프로덕션 환경 고려사항

*   **HTTPS 적용**: 프로덕션 환경에서는 반드시 SSL/TLS 인증서를 사용하여 HTTPS를 적용해야 합니다. `nginx` 서비스 설정을 수정하여 Let's Encrypt와 같은 서비스를 통해 인증서를 발급받고 적용할 수 있습니다.
*   **데이터베이스 백업**: `docker-compose.yml`에 정의된 `mysql_data` 볼륨을 정기적으로 백업하는 정책을 수립해야 합니다.
*   **로그 관리**: 각 서비스의 로그를 중앙에서 수집하고 관리하기 위해 ELK Stack, Graylog, Fluentd와 같은 로그 관리 시스템 도입을 고려할 수 있습니다.
*   **보안 강화**: Docker 컨테이너 및 호스트 서버의 보안을 강화하고, 필요한 포트만 외부에 노출하도록 방화벽을 설정해야 합니다.
*   **모니터링**: Prometheus, Grafana와 같은 도구를 사용하여 서버와 애플리케이션의 상태를 모니터링하고, 이상 상황 발생 시 알림을 받도록 설정하는 것이 좋습니다.